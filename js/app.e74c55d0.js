(function(){"use strict";var e={2596:function(e,t,s){var n=s(3751),a=s(641);const r={class:"h-screen overflow-hidden",style:{background:"#edf2f7"}};function o(e,t,s,n,o,i){const c=(0,a.g2)("ChatLayout");return(0,a.uX)(),(0,a.CE)("div",r,[(0,a.bF)(c)])}const i={class:"font-sans antialiased h-screen flex w-full"};function c(e,t,s,n,r,o){const c=(0,a.g2)("ChannelSidebar"),l=(0,a.g2)("DirectMessageSidebar"),d=(0,a.g2)("ChatContent");return(0,a.uX)(),(0,a.CE)("div",i,[(0,a.bF)(c),(0,a.bF)(l,{username:r.username,"is-connected":r.isConnected},null,8,["username","is-connected"]),(0,a.bF)(d,{username:r.username,onConnectionChange:o.updateConnectionStatus},null,8,["username","onConnectionChange"])])}const l={class:"bg-indigo-darkest text-purple-lighter flex-none w-24 p-6 hidden md:block"};function d(e,t,s,n,r,o){return(0,a.uX)(),(0,a.CE)("div",l,t[0]||(t[0]=[(0,a.Fv)('<div class="cursor-pointer mb-4"><div class="bg-indigo-lighter opacity-25 h-12 w-12 flex items-center justify-center text-black text-2xl font-semibold rounded-lg mb-1 overflow-hidden"> N </div><div class="text-center text-white opacity-50 text-sm">âŒ˜1</div></div><a href="https://github.com/super3/nilo.chat" target="_blank" class="cursor-pointer block"><div class="bg-white opacity-25 h-12 w-12 flex items-center justify-center text-black text-2xl font-semibold rounded-lg mb-1 overflow-hidden hover:opacity-30 transition-opacity"><svg class="fill-current h-10 w-10 block" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M16 10c0 .553-.048 1-.601 1H11v4.399c0 .552-.447.601-1 .601-.553 0-1-.049-1-.601V11H4.601C4.049 11 4 10.553 4 10c0-.553.049-1 .601-1H9V4.601C9 4.048 9.447 4 10 4c.553 0 1 .048 1 .601V9h4.399c.553 0 .601.447.601 1z"></path></svg></div></a>',2)]))}var u={name:"ChannelSidebar"},h=s(6262);const v=(0,h.A)(u,[["render",d]]);var p=v,m=s(33);const g={class:"bg-indigo-darker text-purple-lighter flex-none w-64 pb-6 hidden md:block"},f={class:"text-white mb-2 mt-3 px-4 flex justify-between"},b={class:"flex-auto"},x={class:"flex items-center mb-6"},w={class:"text-white/50 text-sm"},y={class:"mb-8"},k={class:"text-white opacity-75"};function C(e,t,s,n,r,o){return(0,a.uX)(),(0,a.CE)("div",g,[(0,a.Lk)("div",f,[(0,a.Lk)("div",b,[t[0]||(t[0]=(0,a.Lk)("h1",{class:"font-semibold text-xl leading-tight mb-1 truncate"},"nilo.chat",-1)),(0,a.Lk)("div",x,[(0,a.Lk)("span",{class:(0,m.C4)([s.isConnected?"bg-green-500":"border border-white","rounded-full block w-2 h-2 mr-2"])},null,2),(0,a.Lk)("span",w,(0,m.v_)(s.username),1)])]),t[1]||(t[1]=(0,a.Lk)("div",null,[(0,a.Lk)("svg",{class:"h-6 w-6 fill-current text-white/25",viewBox:"0 0 20 20"},[(0,a.Lk)("path",{d:"M14 8a4 4 0 1 0-8 0v7h8V8zM8.027 2.332A6.003 6.003 0 0 0 4 8v6l-3 2v1h18v-1l-3-2V8a6.003 6.003 0 0 0-4.027-5.668 2 2 0 1 0-3.945 0zM12 18a2 2 0 1 1-4 0h4z","fill-rule":"evenodd"})])],-1))]),t[5]||(t[5]=(0,a.Fv)('<div class="mb-8"><div class="px-4 mb-2 text-white flex justify-between items-center"><div class="opacity-75">Channels</div><div><svg class="fill-current h-4 w-4 opacity-50" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M11 9h4v2h-4v4H9v-4H5V9h4V5h2v4zm-1 11a10 10 0 1 1 0-20 10 10 0 0 1 0 20zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16z"></path></svg></div></div><div class="bg-teal-dark py-1 px-4 text-white"># general</div></div>',1)),(0,a.Lk)("div",y,[t[3]||(t[3]=(0,a.Lk)("div",{class:"px-4 mb-2 text-white flex justify-between items-center"},[(0,a.Lk)("div",{class:"opacity-75"},"Direct Messages"),(0,a.Lk)("div",null,[(0,a.Lk)("svg",{class:"fill-current h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,a.Lk)("path",{d:"M11 9h4v2h-4v4H9v-4H5V9h4V5h2v4zm-1 11a10 10 0 1 1 0-20 10 10 0 0 1 0 20zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16z"})])])],-1)),(0,a.Lk)("div",{class:(0,m.C4)(["flex items-center mb-2 px-4",{"opacity-50":!s.isConnected}])},[(0,a.Lk)("span",{class:(0,m.C4)([s.isConnected?"bg-green-500":"border border-white","rounded-full block w-2 h-2 mr-2"])},null,2),(0,a.Lk)("span",k,[(0,a.eW)((0,m.v_)(s.username)+" ",1),t[2]||(t[2]=(0,a.Lk)("span",{class:"text-gray-500 text-sm"},"(you)",-1))])],2),t[4]||(t[4]=(0,a.Fv)('<div class="flex items-center mb-2 px-4"><span class="bg-green-500 rounded-full block w-2 h-2 mr-2"></span><span class="text-white opacity-75">David Hemphill</span></div><div class="flex items-center px-4 opacity-50"><span class="border border-white rounded-full w-2 h-2 mr-2"></span><span class="text-white">Steve Schoger</span></div>',2))]),t[6]||(t[6]=(0,a.Lk)("div",null,[(0,a.Lk)("div",{class:"px-4 mb-2 text-white flex justify-between items-center"},[(0,a.Lk)("div",{class:"opacity-75"},"Apps"),(0,a.Lk)("div",null,[(0,a.Lk)("svg",{class:"fill-current h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,a.Lk)("path",{d:"M11 9h4v2h-4v4H9v-4H5V9h4V5h2v4zm-1 11a10 10 0 1 1 0-20 10 10 0 0 1 0 20zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16z"})])])])],-1))])}var L={name:"DirectMessageSidebar",props:{username:{type:String,required:!0},isConnected:{type:Boolean,default:!1}}};const M=(0,h.A)(L,[["render",C]]);var S=M;const _={class:"flex-1 flex flex-col bg-white overflow-hidden"},F={class:"px-6 py-4 flex-1 overflow-y-auto"},j={class:"pb-6 px-4 flex-none"},z={class:"flex rounded-lg border-2 border-gray-300 overflow-hidden"};function A(e,t,s,r,o,i){const c=(0,a.g2)("ChatMessage");return(0,a.uX)(),(0,a.CE)("div",_,[t[3]||(t[3]=(0,a.Fv)('<div class="border-b border-border-light flex px-6 py-2 items-center flex-none"><div class="flex flex-col"><h3 class="text-gray-900 mb-1 font-extrabold">#general</h3><div class="text-gray-600 text-sm truncate"> Main discussion area for our self-improving chat application, built by AI agents. </div></div><div class="ml-auto hidden md:block"><div class="relative"><input type="search" placeholder="Search" class="appearance-none border border-gray-300 rounded-lg pl-8 pr-4 py-2"><div class="absolute inset-y-0 left-0 pl-3 flex items-center justify-center"><svg class="fill-current text-gray-500 h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M12.9 14.32a8 8 0 1 1 1.41-1.41l5.35 5.33-1.42 1.42-5.33-5.34zM8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12z"></path></svg></div></div></div></div>',1)),(0,a.Lk)("div",F,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.messages,((e,t)=>((0,a.uX)(),(0,a.Wv)(c,{key:t,username:e.username,timestamp:i.formatTimestamp(e.timestamp),message:e.message,code:e.code||"","avatar-color":i.getAvatarColor(e.username)},null,8,["username","timestamp","message","code","avatar-color"])))),128))]),(0,a.Lk)("div",j,[(0,a.Lk)("div",z,[t[2]||(t[2]=(0,a.Lk)("span",{class:"text-3xl text-gray-500 border-r-2 border-gray-300 p-2"},[(0,a.Lk)("svg",{class:"fill-current h-6 w-6 block",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,a.Lk)("path",{d:"M16 10c0 .553-.048 1-.601 1H11v4.399c0 .552-.447.601-1 .601-.553 0-1-.049-1-.601V11H4.601C4.049 11 4 10.553 4 10c0-.553.049-1 .601-1H9V4.601C9 4.048 9.447 4 10 4c.553 0 1 .048 1 .601V9h4.399c.553 0 .601.447.601 1z"})])],-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",class:"w-full px-4",placeholder:"Message #general","onUpdate:modelValue":t[0]||(t[0]=e=>o.newMessage=e),onKeyup:t[1]||(t[1]=(0,n.jR)(((...e)=>i.sendMessage&&i.sendMessage(...e)),["enter"]))},null,544),[[n.Jo,o.newMessage]])])])])}s(4114),s(8111),s(1701),s(8237);const E={class:"flex items-start mb-4 text-sm"},H=["src"],V={class:"flex-1 overflow-hidden"},O={class:"font-bold"},B={class:"text-gray-500 text-xs ml-1"},X={key:0,class:"text-black leading-normal"},T={class:"text-black leading-normal"},$={class:"bg-gray-100 border border-gray-200 text-gray-800 text-sm font-mono rounded p-3 mt-2 whitespace-pre overflow-scroll"};function q(e,t,s,n,r,o){return(0,a.uX)(),(0,a.CE)("div",E,[(0,a.Lk)("img",{src:o.avatarUrl,class:"w-10 h-10 rounded mr-3"},null,8,H),(0,a.Lk)("div",V,[(0,a.Lk)("div",null,[(0,a.Lk)("span",O,(0,m.v_)(s.username),1),(0,a.Lk)("span",B,(0,m.v_)(s.timestamp),1)]),o.hasCode?((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[(0,a.Lk)("p",T,(0,m.v_)(s.message),1),(0,a.Lk)("div",$,(0,m.v_)(s.code),1)],64)):((0,a.uX)(),(0,a.CE)("p",X,(0,m.v_)(s.message),1))])])}var D={name:"ChatMessage",props:{username:{type:String,required:!0},timestamp:{type:String,required:!0},message:{type:String,required:!0},code:{type:String,default:""},avatarColor:{type:String,default:"4F46E5"}},computed:{hasCode(){return""!==this.code},avatarUrl(){return`https://ui-avatars.com/api/?name=${encodeURIComponent(this.username)}&background=${this.avatarColor}&color=fff`}}};const U=(0,h.A)(D,[["render",q]]);var P=U,I=s(4787),K={name:"ChatContent",components:{ChatMessage:P},props:{username:{type:String,required:!0}},data(){return{newMessage:"",messages:[],socket:null,isConnected:!1}},created(){this.socket=(0,I.Ay)(),this.socket.on("connect",(()=>{this.isConnected=!0,this.$emit("connection-change",!0),this.socket.emit("user_connected",{username:this.username})})),this.socket.on("disconnect",(()=>{this.isConnected=!1,this.$emit("connection-change",!1)})),this.socket.on("connect_error",(()=>{this.isConnected=!1,this.$emit("connection-change",!1)})),this.socket.on("message_history",(e=>{this.messages=e.map((e=>{const[t,s,n]=e.split("|");return{timestamp:t,username:s,message:n}}))})),this.socket.on("chat_message",(e=>{this.messages.push(e),this.$nextTick((()=>{const e=document.querySelector(".overflow-y-auto");e&&(e.scrollTop=e.scrollHeight)}))}))},beforeUnmount(){this.socket&&this.socket.disconnect()},methods:{sendMessage(){""!==this.newMessage.trim()&&this.isConnected&&(this.socket.emit("chat_message",{username:this.username,message:this.newMessage}),this.newMessage="")},formatTimestamp(e){try{const t=new Date(e);return`${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`}catch(t){return e}},getAvatarColor(e){const t=["4F46E5","3B82F6","10B981","F59E0B","EF4444","8B5CF6"],s=Math.abs(e.split("").reduce(((e,t)=>e+t.charCodeAt(0)),0))%t.length;return t[s]}}};const R=(0,h.A)(K,[["render",A]]);var W=R,J={name:"ChatLayout",components:{ChannelSidebar:p,DirectMessageSidebar:S,ChatContent:W},data(){return{username:"User_"+Math.floor(1e3*Math.random()),isConnected:!1}},methods:{updateConnectionStatus(e){this.isConnected=e}}};const N=(0,h.A)(J,[["render",c]]);var G=N,Q={name:"App",components:{ChatLayout:G}};const Y=(0,h.A)(Q,[["render",o]]);var Z=Y;(0,n.Ef)(Z).mount("#app")}},t={};function s(n){var a=t[n];if(void 0!==a)return a.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,s),r.exports}s.m=e,function(){var e=[];s.O=function(t,n,a,r){if(!n){var o=1/0;for(d=0;d<e.length;d++){n=e[d][0],a=e[d][1],r=e[d][2];for(var i=!0,c=0;c<n.length;c++)(!1&r||o>=r)&&Object.keys(s.O).every((function(e){return s.O[e](n[c])}))?n.splice(c--,1):(i=!1,r<o&&(o=r));if(i){e.splice(d--,1);var l=a();void 0!==l&&(t=l)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[n,a,r]}}(),function(){s.d=function(e,t){for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,r,o=n[0],i=n[1],c=n[2],l=0;if(o.some((function(t){return 0!==e[t]}))){for(a in i)s.o(i,a)&&(s.m[a]=i[a]);if(c)var d=c(s)}for(t&&t(n);l<o.length;l++)r=o[l],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return s.O(d)},n=self["webpackChunknilo_chat"]=self["webpackChunknilo_chat"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=s.O(void 0,[504],(function(){return s(2596)}));n=s.O(n)})();
//# sourceMappingURL=app.e74c55d0.js.map